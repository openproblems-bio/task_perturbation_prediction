import anndata as ad

## VIASH START
# Note: this section is auto-generated by viash at runtime. To edit it, make changes
# in config.vsh.yaml and then run `viash config inject config.vsh.yaml`.
par = {
  'de_train_h5ad': 'resources_test/.../de_train_h5ad.h5ad',
  'id_map': 'resources_test/.../id_map.h5ad',
  'layer': 'clipped_sign_log10_pval',
  'output': 'output.h5ad',
  'output_model': 'model.h5ad'
}
meta = {
  'name': 'cpa'
}
## VIASH END

print('Reading input files', flush=True)
de_train_h5ad = ad.read_h5ad(par['de_train_h5ad'])
id_map = ad.read_h5ad(par['id_map'])

print('Preprocess data', flush=True)
# ... preprocessing ...

print('Train model', flush=True)
# ... train model ...

print('Generate predictions', flush=True)
# ... generate predictions ...

print("Write output AnnData to file", flush=True)
output = ad.AnnData(
  
)
output.write_h5ad(par['output'], compression='gzip')
print("Write output_model AnnData to file", flush=True)
output_model = ad.AnnData(
  
)
output_model.write_h5ad(par['output_model'], compression='gzip')
